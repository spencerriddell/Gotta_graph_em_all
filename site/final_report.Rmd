---
title: "Final Report"
output: html_document
---

## Motivation

As lifelong Pokémon players, our team has always been curious about the fundamental questions that drive competitive gameplay: What makes a Pokémon strong? How do physical characteristics like height and weight relate to combat performance? Which Pokémon types dominate key stats such as HP, Attack, and Speed? Do dual-type Pokémon have inherent advantages over single-type species?

These questions emerged from years of gameplay experience—battling friends, competing online, and building teams without fully understanding the statistical patterns underlying the Pokémon universe. While players often rely on intuition and trial-and-error, we recognized an opportunity to use data science to uncover the hidden structure behind Pokémon design.

Our primary goal is to explore relationships between Pokémon characteristics (type, stats, physical traits, rarity) and combat effectiveness using rigorous statistical methods. Beyond satisfying our curiosity, this project aims to provide actionable insights that can enhance team-building strategies for both casual players and competitive trainers. By analyzing 802 Pokémon across seven generations using classification algorithms, hypothesis testing, and regression modeling, we seek to answer: Can data science reveal the hidden 'rules' that govern Pokémon strength?"


## Research Questions

Our project addresses three distinct research questions, each requiring different statistical approaches:
**Research Question 1: Type Classification from Stats**

*Question:* Can we predict a Pokémon's primary type based solely on its base stat distribution?

*Hypotheses:*

H₀: Pokémon stat distributions do not differ significantly across primary types; we cannot predict type from stats better than random chance
H₁: Pokémon stat distributions vary systematically by primary type (e.g., Fire types have higher Attack, Psychic types have higher Special Attack)

*Motivation:* If types have distinctive stat signatures, this reveals fundamental design principles in the Pokémon universe and helps players identify type weaknesses based on stat patterns. This question evolved from initial exploratory boxplots showing type differences—we formalized it into a classification problem to quantify predictability.

**Research Question 2: Dual-Type Advantage**

*Question:* Do dual-type Pokémon have higher total base stats than single-type Pokémon?

*Hypotheses:*

H₀: There is no difference in mean `base_total` between single-type and dual-type Pokémon (μ_single = μ_dual)
H₁: There is a difference in mean `base_total` between single-type and dual-type Pokémon (μ_single ≠ μ_dual)

*Motivation:* Dual typing provides strategic advantages (more resistances, more STAB move coverage), but does this come with a stat penalty for game balance? Or do dual-types receive stat boosts to compensate for added complexity? This question emerged after observing apparent distribution shifts in exploratory density plots.

**Research Question 3: Capture Rate and Combat Effectiveness**

*Question:* Is there a relationship between how difficult a Pokémon is to catch (capture rate) and its overall combat strength (base stats)?

*Hypotheses:*

H₀: There is no linear relationship between `capture_rate` and `base_total` in non-legendary Pokémon, after controlling for physical characteristics and generation
H₁: There is a significant negative relationship between ``capture_rate` and `base_total` (harder-to-catch Pokémon tend to be stronger), after controlling for covariates

*Motivation:* Players intuitively assume rare Pokémon are stronger, but this had never been tested with proper controls for confounding variables like physical size (which might affect both catchability and stats) and generation (which might reflect evolving design philosophies). We refined this from a simple correlation to multiple regression after recognizing potential confounders.

## Data

We used the **Complete Pokémon Dataset** from Kaggle (https://www.kaggle.com/datasets/rounakbanik/pokemon), containing comprehensive information on **802 Pokémon** from Generations 1-7. This dataset includes 41 variables covering base stats, types, physical characteristics, battle mechanics, and metadata.

**Key variables used:**

- Combat stats: `hp`, `attack`, `defense`, `sp_attack`, `sp_defense`, `speed`, `base_total` (sum of six base stats)
- Type information: `type1` (primary type, 18 categories), `type2` (secondary type or "None")
- Physical traits: `height_m`, `weight_kg`
- Rarity & metadata: `capture_rate` (3-255; higher = easier), `generation` (1-7), `is_legendary`, `percentage_male`

**Data Cleaning Process**

*Step 1: Variable Standardization*
- Converted all variable names to snake_case for consistency.
- Treated standard placeholders (e.g., blank strings, `"NA"`, `"."`) as missing values during import.

*Step 2: Type Variable Recoding*
- Recoded missing `type2` values as `"None"` to distinguish truly single-type Pokémon from missing data.
- Standardized type names to title case.
- Removed duplicate entries based on Pokémon name, keeping one record per species.

*Step 3: Type Conversions*
- Converted categorical variables (`type1`, `type2`, and `generation`) to factors for proper statistical modeling.
- Ensured boolean variable (`is_legendary`) was stored as a logical variable.

*Step 4: Numeric Coercion*
- Some stat and related variables were stored as character due to parsing issues.
- Certain `capture_rate` entries used composite strings for Pokémon with multiple forms.
- These non-standard entries produced NA values upon numeric coercion, which were subsequently excluded in complete-case analyses.

*Step 5: Analysis-Specific Preparation*

- Research Question 1 (Type Prediction):
Used all Pokémon with complete data on `type1` and the six base stats when fitting the random forest model; an 80/20 stratified split created training and test sets.

- Research Question 2 (Dual-Type Comparison):
Created a binary `dual_type` variable, labeling Pokémon as *Single* if `type2 == "None"` and *Dual* otherwise. All Pokémon with non-missing `base_total` and type information were included.

- Research Question 3 (Capture Rate):
Excluded legendary Pokémon, whose capture mechanics and stats differ systematically from regular species.
Recoded `generation` into `"Early"` (1–3) and `"Modern"` (4–7) for interpretability.
Restricted to observations with non-missing `capture_rate`, `base_total`, `height_m`, `weight_kg`, `percentage_male`, and `generation`, yielding a complete-case analytic sample.

**Data Quality & Limitations**

*Issues encountered:*

- A small number of `capture_rate` values used composite strings tied to specific forms, which could not be converted directly to numeric and became missing upon coercion; those rows were dropped in models requiring numeric `capture_rate`.
- Some primary types had relatively small sample sizes, which affected type-specific prediction accuracy and made some per-type estimates less stable.

**Limitations:**

- The dataset includes Pokémon through Generation 7 and does not cover newer species introduced in later games.
- Only base stats are used; individual values (IVs), effort values (EVs), natures, abilities in battle, and movesets are not included, so in-game performance cannot be captured fully.
- The data are cross-sectional by species and cannot address temporal changes within species across game versions.

## Methods (high level)

**Overview**
We employed three distinct statistical approaches to address our research questions: machine learning classification (Random Forest), parametric hypothesis testing (two-sample t-test), and multivariable regression. All analyses were conducted in R using `tidyverse`, `randomForest`, `caret` and `gtsummary ` packages.

**Research Question 1: Type Prediction (Random Forest Classification)**
*Rationale:* With 18 type categories and potential non-linear relationships between stats and types, Random Forest is ideal for multi-class classification while providing interpretable feature importance metrics.

*Sample:* All Pokémon with complete data on the six base stats and primary type were eligible; an 80/20 stratified split ensured similar type distributions in training and test sets.

*Approach:*
- Train/Test Split: 
80% training set, 20% test set using stratified sampling on `type1`.
- Model Specification: 
Random forest classifier with 500 trees `(ntree = 500)` and default mtry
- Predictors: 
Six base stats (`hp`, `attack`, `defense`, `sp_attack`, `sp_defense`, `speed`)
- Outcome: 
`type1` (18 categories)

*Evaluation Metrics:*

- Overall accuracy: Proportion of correctly classified Pokémon in the test set.
- Baseline comparison: Accuracy from random guessing across 18 types.
- Success threshold: ≥25% accuracy (about 4.5 times baseline) to indicate strong type signal in stats.
- Feature importance: Mean Decrease in Gini impurity to identify which stats contribute most to type discrimination.
- Type-specific accuracy: Per-type accuracy computed from the confusion matrix, used to identify which types are easiest or hardest to predict.

**Research Question 2: Dual-Type Advantage (Two-Sample t-test)**
*Rationale:* Comparing mean total stats between two independent groups (single-type vs. dual-type) with a continuous outcome is a standard application of the two-sample t-test

*Sample:* All Pokémon with non-missing `base_total` and type information. Group sizes correspond to the counts of species with and without a secondary type (`type2` equal to `"None"` vs. any other value).

*Approach:*
- Grouping variable: 
`dual_type` with two levels: `Single` (no secondary type) and `Dual` (has secondary type). Created `dual_type` (Single vs. Dual) from `type2`.
- Outcome: 
`base_total` (continuous, sum of six base stats)
- Test type: 
Welch’s two-sample t-test, which does not assume equal variances between groups.
- Significance level: 
α = 0.05

*Assumptions Checked:*

- Independence: Each Pokémon species appears once in the dataset after removing duplicates.
- Approximate normality within groups: Assessed using violin and boxplots of `base_total` by `dual_type`.
- Variance differences: Accommodated by using Welch’s t-test, which is robust to unequal variances.
- Effect Size: Mean difference in `base_total` between dual-type and single-type Pokémon, with a 95% confidence interval to quantify magnitude and uncertainty.

**Research Question 3: Capture Rate Regression (Multiple Linear Regression)**
*Rationale:* Multiple linear regression allows assessment of the association between capture rate and total base stats while controlling for covariates that may confound this relationship.

*Sample:* Non-legendary Pokémon with complete data on `capture_rate`, `base_total`, `height_m`, `weight_kg`, `percentage_male`, and `generation` (recoded as Early vs Modern).

*Approach:*
- Outcome: 
`base_total` (continuous)
- Primary predictor: 
`capture_rate` (continuous; higher values indicate easier-to-catch Pokémon).

*Covariates (confounders):*

- `height_m`: Physical size, potentially related to both capture difficulty and strength.
- `weight_kg`: Mass, potentially associated with both bulk and capture mechanics.
- `percentage_male`: Sex ratio, which may correlate with stat distributions in certain species lines.
- `generation`: Binary factor (`Early` for Generations 1–3, `Modern` for Generations 4–7) to adjust for design shifts over time

*Covariate Justification:*

- Height and weight: Exploratory plots showed that larger Pokémon often have higher base stats, and game mechanics suggest size can influence capture dynamics.
- Percentage male: Some evolutionary lines exhibit sex-based stat differences, so sex distribution may relate to combat potential.
- Generation: Power creep and changing design philosophies across generations can affect both capture rates and base stats, making generation a potential confounder.

*Assumptions Checked:*

- Linearity: The relationship between `capture_rate` and `base_total`, as well as between covariates and `base_total`, was examined visually and treated as approximately linear.
- Independence: Each row represents a distinct Pokémon species.
- Homoscedasticity: Residuals versus fitted values were inspected to assess constant variance.
- Normality of residuals: Q–Q plots of residuals were examined and appeared reasonably close to normal.

*Interpretation Focus:*

- Coefficient for `capture_rate`: The expected change in `base_total` for a one-unit increase in capture rate, holding other covariates constant.
- Statistical significance: Evaluated at α = 0.05 via p-values and confidence intervals.
- Practical significance: Considered via the magnitude of the capture_rate coefficient and the proportion of variance explained (R²).

**Exploratory Data Analysis (Informed Methods)**

Before formal modeling, we conducted exploratory data analysis to guide decisions:

- Boxplots of `base_total` by `type1` showed differences in central tendency and spread across types but substantial overlap, motivating a predictive classification approach rather than relying solely on ANOVA.

- Distribution plots of `base_total` by single vs dual typing suggested that dual-type Pokémon tended to have somewhat higher total stats, motivating a two-sample comparison.

- Scatterplots of height and weight versus `base_total`, and their relationships with `capture_rate`, supported including these variables as covariates in the regression model.

- Legendary Pokémon had clearly elevated base stat totals and distinct capture mechanics, reinforcing the decision to exclude them from the capture-rate regression to avoid distorting linear trends.


## Results (summary)


## Discussion


## References

