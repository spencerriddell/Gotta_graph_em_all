---
title: "Home"
output:
  html_document:
    toc: false
---

```{r setup, include=FALSE}
library(htmltools)
knitr::opts_chunk$set(echo = FALSE)
```

```{r landing}
# Links for tiles and CTAs (same as your original)

# Title card: EXACTLY as you had it (structure and classes preserved)
hero <- tags$section(
  class = "home-hero",
  tags$div(class = "home-hero__bg"),
  tags$div(
    class = "home-hero__content",
    tags$div(class = "home-hero__pokeball", `aria-hidden` = "true"),
    tags$h1(class = "home-hero__title", "Gotta Graph ’Em All"),
    tags$p(class = "home-hero__subtitle",
           "Data science adventures in the Pokémon universe"),
    tags$div(
      class = "home-hero__ctas",
      tags$a(class = "btn-cta btn-cta--primary", href = "about.html","Meet the Trainers"),
      tags$a(class = "btn-cta btn-cta--primary", href = "eda.html",  "Explore EDA"),
      tags$a(class = "btn-cta btn-cta--primary", href = "analysis.html","Explore Analytics"),
      tags$a(class = "btn-cta btn-cta--primary", href = "final_report.html", "Final Report"),
      tags$a(class = "btn-cta btn-cta--primary", href = "screencast.html","Screencast"),
      tags$a(class = "btn-cta btn-cta--primary", href = "contact.html", "Contact Us")
    )
  )
)

# ---------- Random collage from assets/pkmn (no names) ----------
img_dir <- "assets/pkmn"
imgs <- list.files(img_dir, pattern = "\\.(png|jpg|jpeg|svg)$", ignore.case = TRUE)

set.seed(as.integer(format(Sys.time(), "%S")))  # vary seed over time
n_collage <- min(length(imgs), 40)              # up to 40 random images
collage_files <- if (n_collage > 0) sample(imgs, n_collage) else character(0)

collage_cards <- lapply(collage_files, function(f) {
  tags$div(
    class = "pkmn-card",
    tags$img(src = file.path(img_dir, f), alt = "", loading = "lazy")
  )
})

collage <- tags$section(
  class = "pkmn-collage",
  collage_cards
)

# ---------- Featured random Pokémon with associated name ----------
featured_file <- if (length(imgs)) sample(imgs, 1) else NA_character_
featured_name <- if (!is.na(featured_file)) {
  nm <- sub("\\.[^.]*$", "", featured_file)
  parts <- strsplit(nm, "[-_ ]")[[1]]
  # Capitalize each part and join with spaces
  paste0(toupper(substring(parts, 1, 1)), substring(parts, 2), collapse = " ")
} else "Pokémon"

featured_header <- tags$h2(class = "pkmn-featured__title", "Who's That Pokémon?")

featured <- if (!is.na(featured_file)) {
  tags$section(
    class = "pkmn-featured",
    tags$div(
      class = "pkmn-featured__card",
      tags$img(src = file.path(img_dir, featured_file), alt = featured_name),
      tags$div(
        class = "pkmn-featured__meta",
        tags$h3(class = "pkmn-featured__name", featured_name)
      )
    )
  )
} else NULL

# Compose page (order preserved: hero -> grid -> features -> new featured section -> collage)
tagList(
  hero,
  featured_header,
  featured,
  collage
)
```

<style>
/* Hero: same look with subtle Pokéball background */
.home-hero { position: relative; overflow: hidden; border-radius: 14px; margin-bottom: 28px; }
.home-hero__bg {
  position: absolute; inset: 0;
  background: radial-gradient(1200px 600px at 10% 10%, rgba(99,144,240,.25) 0%, rgba(255,255,255,0) 60%),
              radial-gradient(900px 500px at 90% 15%, rgba(238,129,48,.18) 0%, rgba(255,255,255,0) 60%),
              radial-gradient(900px 500px at 25% 85%, rgba(122,199,76,.18) 0%, rgba(255,255,255,0) 60%);
  filter: saturate(1.1);
}
.home-hero__content { position: relative; padding: 42px 26px 28px; }
.home-hero__pokeball {
  position: absolute; right: 18px; bottom: 12px;
  width: 140px; height: 140px; border-radius: 50%;
  background:
    radial-gradient(circle at 50% 50%, #e0e0e0 0, #e0e0e0 48%, #111 49%, #111 51%, #e0e0e0 52%),
    linear-gradient(#e53935 0 50%, #fff 50% 100%);
  opacity: .18;
}
.home-hero__title { font-family: PocketMonk, Montserrat, Arial, sans-serif; font-size: 40px; margin: 0 0 8px; }
.home-hero__subtitle { margin: 0 0 16px; opacity: .85; }

.btn-cta {
  display: inline-block; margin-right: 8px; margin-bottom: 10px;
  padding: 10px 14px; border-radius: 10px; text-decoration: none;
  background: #1a3fb0; color: #fff; box-shadow: 0 2px 0 rgba(0,0,0,.2);
}
.btn-cta--primary { background: #1a3fb0; }
.btn-cta:hover { filter: brightness(1.05); }

/* Featured random Pokémon section */
.pkmn-featured__title { margin: 24px 0 10px; }
.pkmn-featured__card {
  display: grid; grid-template-columns: minmax(200px, 24%) 1fr;
  gap: 16px; align-items: center;
  border: 1px solid #e6e6e6; border-radius: 12px; padding: 14px; background: #fff;
}
.pkmn-featured__card img {
  width: 100%; height: auto; object-fit: contain; display: block; background: #fafafa; border-radius: 10px;
}
.pkmn-featured__name {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color: #000;
  font-weight: 400;       /* or 400 for fully normal */
  line-height: 1.25;
  letter-spacing: 0;      /* ensure no weird spacing */
  text-rendering: optimizeLegibility;
  text-shadow: none !important;
  filter: none !important;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Collage (random images, no names) */
.pkmn-collage {
  margin: 16px 0 6px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  gap: 8px;
}
.pkmn-card {
  background: #fff; border: 1px solid #eee; border-radius: 12px;
  padding: 8px; display: flex; align-items: center; justify-content: center;
}
.pkmn-card img {
  max-width: 100%; height: auto; display: block;
  image-rendering: -webkit-optimize-contrast;
}
@media (max-width: 860px) {
  .pkmn-featured__card { grid-template-columns: 1fr; }
}
</style>